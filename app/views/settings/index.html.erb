<div class="home-container">
  <div class="search-header-section">
    <div class="language-dropdown">
      <div class="flag-indicator" onclick="document.getElementById('lang-menu').classList.toggle('show')">
        <%= I18n.locale == :en ? "ðŸ‡¬ðŸ‡§" : (I18n.locale == :it ? "ðŸ‡®ðŸ‡¹" : (I18n.locale == :fr ? "ðŸ‡«ðŸ‡·" : (I18n.locale == :es ? "ðŸ‡ªðŸ‡¸" : "ðŸ‡µðŸ‡¹"))) %>
        <span class="arrow-down">â–¼</span>
      </div>

      <div id="lang-menu" class="dropdown-content">
        <%= link_to "ðŸ‡¬ðŸ‡§ English", url_for(locale: :en) unless I18n.locale == :en %>
        <%= link_to "ðŸ‡®ðŸ‡¹ Italiano", url_for(locale: :it) unless I18n.locale == :it %>
        <%= link_to "ðŸ‡«ðŸ‡· FranÃ§ais", url_for(locale: :fr) unless I18n.locale == :fr %>
        <%= link_to "ðŸ‡ªðŸ‡¸ EspaÃ±ol", url_for(locale: :es) unless I18n.locale == :es %>
        <%= link_to "ðŸ‡µðŸ‡¹ PortuguÃªs", url_for(locale: :pt) unless I18n.locale == :pt %>
      </div>
    </div>

    <div class="user-dropdown">
      <div class="user-action-btn" onclick="document.getElementById('user-menu').classList.toggle('show')">
        <i class="fa-solid fa-user"></i>
      </div>
      <div id="user-menu" class="dropdown-content dropdown-user">
        <p class="user-email"><%= current_user.email %></p>
        <%= button_to t('nav.logout'), destroy_user_session_path, method: :delete %>
      </div>
    </div>


    <div class="search-main-nav">
      <%= link_to my_dictionary_path, class: "nav-item" do %>
        <i class="fa-regular fa-bookmark"></i>
        <span><%= t('nav.saved', default: 'Saved') %></span>
      <% end %>
      <%= link_to search_path, class: "nav-item" do %>
        <i class="fa-solid fa-house"></i>
        <span><%= t('nav.home', default: 'Home') %></span>
      <% end %>
      <%= link_to settings_path, class: "nav-item active" do %>
        <i class="fa-solid fa-gear"></i>
        <span><%= t('nav.settings', default: 'Settings') %></span>
      <% end %>
    </div>
      <h1 class="settings-title">
        <i class="fa-solid fa-gear"></i>
        <%= t('settings.title', default: 'Settings') %>
      </h1>
  </div>

  <div class="settings-content-section">
    <div class="settings-container">

      <div class="settings-section">
        <div class="settings-card">
        <h2 class="section-title">
          <i class="fa-solid fa-user"></i>
          <%= t('settings.account_info', default: 'Account Information') %>
        </h2>
          <div class="info-row">
            <span class="info-label"><%= t('settings.email', default: 'Email') %>:</span>
            <span class="info-value"><%= current_user.email %></span>
          </div>
          <div class="info-row">
            <span class="info-label"><%= t('settings.member_since', default: 'Member since') %>:</span>
            <span class="info-value"><%= current_user.created_at.strftime("%B %d, %Y") %></span>
          </div>
          <div class="info-row">
            <span class="info-label"><%= t('settings.saved_idioms', default: 'Saved idioms') %>:</span>
            <span class="info-value"><%= current_user.saved_translations.count %></span>
          </div>
        </div>
      </div>

      <div class="settings-section">
        <div class="settings-card">
        <h2 class="section-title">
          <i class="fa-solid fa-lock"></i>
          <%= t('settings.security', default: 'Security') %>
        </h2>
          <div class="action-item">
            <div class="action-info">
              <h3><%= t('settings.change_password', default: 'Change Password') %></h3>
              <p><%= t('settings.change_password_desc', default: 'Update your password to keep your account secure.') %></p>
            </div>
            <%= link_to edit_user_registration_path, class: "btn-settings-action" do %>
              <i class="fa-solid fa-key"></i>
              <%= t('settings.change_password_button', default: 'Change Password') %>
            <% end %>
          </div>

        </div>
      </div>

      <div class="settings-section">
        <div class="settings-card danger-card">
        <h2 class="section-title danger-title">
          <i class="fa-solid fa-triangle-exclamation"></i>
          <%= t('settings.danger_zone', default: 'Danger Zone') %>
        </h2>
          <div class="action-item">
            <div class="action-info">
              <h3><%= t('settings.delete_account', default: 'Delete Account') %></h3>
              <p><%= t('settings.delete_account_desc', default: 'Permanently delete your account and all saved idioms. This action cannot be undone.') %></p>
            </div>
            <%= button_to delete_account_path,
                method: :delete,
                class: "btn-settings-danger",
                data: {
                  confirm: t('settings.delete_confirm', default: 'Are you sure you want to delete your account? This action cannot be undone and all your saved idioms will be lost forever.')
                } do %>
              <i class="fa-solid fa-trash"></i>
              <%= t('settings.delete_account_button', default: 'Delete Account') %>
            <% end %>
          </div>
        </div>
      </div>

      <div class="settings-back">
        <%= link_to search_path, class: "btn-back" do %>
          <i class="fa-solid fa-arrow-left"></i>
          <%= t('settings.back_to_app', default: 'Back to App') %>
        <% end %>
      </div>
    </div>
  </div>
</div>
